# 도커 / 쿠버네티스 스터디

## Chapter01 도커란?

도커 : 리눅스 컨테이너에 여러 기능을 추가함으로써 애플리케이션을 컨테이너로서 좀 더 쉽게 사용할 수 있게 만들어진 오픈소스 프로젝트

- 1.1 가상 머신과 도커 컨테이너
    
    ![Untitled](Image/Untitled.png)
    
    - 기존의 가상화 기술은 하이퍼바이저를 이용해 여러 개의 운영체제를 하나의 호스트에서 생성해 사용하는 방식 (단위: 가상 머신)
        - 하이퍼바이저에 의해 생성되고 관리되는 운영체제는 Guest OS라고 하며, 각 게스트 운영체제는 다른 게스트 운영체제와는 완전히 독립된 공간과 시스템 자원을 할당받아 사용
            
            > 하이퍼바이저 : 가상머신을 생성하고 구동하는 소프트웨어
            > 
            > 
            > CPU, 메모리, 스토리지 등의 리소스를 처리하는 풀로, 기존 게스트 간 또는 새로운 가상 머신에 쉽게 재배치 가능
            > 
        - 그러나 **각종 시스템 자원을 가상화하고 독립된 공간을 생성하는 작업은 하이퍼바이저를 반드시 거치기 때문에 일반 호스트에 비해 성능의 손실이 발생**
        - 그뿐만 아니라 게스트 운영체제를 사용하기 위한 라이브러리, 커널 등을 전부 포함하기 때문에 가상 머신을 배포하기 위한 이미지로 만들었을 때 이미지의 크기 또한 커짐
    - 도커 컨테이너는 가상화된 공간을 생성하기 위해 리눅스의 자체기능인 chroot,namespace,cgroup을 사용함으로써 프로세스 단위의 격리 환경을 만들기 때문에 성능 손실이 거의 없음
        - 컨테이너에 필요한 커널은 호스트의 커널을 공유해 사용하고, 컨테이너 안에는 애플리케이션을 구동하는 데 필요한 라이브러리 및 실행 파일만 존재하기 때문에 컨테이너를 이미지로 만들었을 때 이미지의 용량 또한 가상 머신에 비해 대폭 줄어든다.
- 1.2 도커를 시작해야 하는 이유
    - 애플리케이션의 개발과 배포가 편해진다.
        - 서버를 부팅할 때 실행되는 운영체제를 일반적으로 호스트 OS라고 부르며, 도커 컨테이너는 호스트 OS 위에서 실행되는 격리된 공간
            - 컨테이너 자체에 특별한 권한을 주지 않는 한, 호스트 OS에는 영향을 끼치지 않는다. → 독립된 개발 환경 보장
        - 운영 환경에 컨테이너를 배포하려 한다면, 해당 컨테이너를 도커 이미지라고 하는 일종의 패키지로 만들어 운영 서버에 전달하기만 하면 된다.
            - 컨테이너에서 사용되던 운영 서버에서 새롭게 패키지를 설치할 필요도 없으며, 각종 라이브러리 설치 등으로 인한 의존성을 걱정할 필요도 없다
            - 서비스를 개발했을 때 사용했던 환경을 다른 서버에서도 컨테이너로서 똑같이 복제할 수 있기 때문에 개발/운영 환경의 통합이 가능
        - 도커 이미지는 가상머신의 이미지와 달리 커널을 포함하고 있지 않기 때문에 이미지 크기가 그다지 크지 않음
        - 도커는 이미지 내용을 레이어 단위로 구성하며, 중복되는 레이어를 재사용할 수 있어서 애플리케이션의 배포 속도가 매우 빨라진다는 장점이 있다.
    - 여러 애플리케이션의 독립성과 확장성이 높아진다.
        - 모놀리스 애플리케이션
            - 소프트웨어의 여러 모듈이 상호 작용하는 로직을 하나의 프로그램 내에서 구동시키는 방식
            - 소규모 서비스에 적합
                - 서비스의 기능이 복잡해지고 거대해질수록 소프트웨어 자체의 확장성과 유연성이 줄어든다는 단점이 존재
        - 마이크로 서비스 구조
            - 여러 모듈을 독립된 형태로 구성하기 때문에 언어에 종속되지 않고 변화에 빠르게 대응할 수 있으며, 각 모듈의 관리가 쉬워진다는 장점이 있다.
            - 컨테이너는 수 초 내로 생성, 시작이 가능할 뿐만 아니라 여러 모듈에게 독립된 환경을 동시에 제공할 수 있기 때문에 마이크로서비스 구조에서 가장 많이 사용되고 있는 가상화 기술
